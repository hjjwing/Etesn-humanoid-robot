爱特生智能关节操作指令

指令通信方式
控制主机与智能关节之间的控制与信息反馈操作，有串行总线和WiFi联网通信两种方式。串行总线方式在任何情况下均可使用；而使用WiFi联网方式前，需用户先在串行总线方式下配置好WiFi联网参数。
指令类型
指令为ASCII码字符串，区分大小写。
指令格式
[命令名@参数1#参数2#参数3#……]
注：在串行总线上同时连接多个智能关节，为了区分是操作哪个关节，需加上关节编号参数，加后命令格式为[<关节编号>命令名@参数1#参数2#参数3#……]，如果传递的关节编号为0或未加，则表示此指令对全部接收到命令的关节均有效。对于带了关节编号的指令，关节的返回数据里也会带上对应的关节编号。需注意，参数顺序不可颠倒。
智能关节返回数据格式
{返回的ASCII码字符串数据内容}
配置保存
智能关节具有断电保存功能，所以只需要初始使用时配置一次参数即可。

指令集
一、运动类指令
1、	绝对角度旋转指令
指令名称：ra
指令说明：让智能关节在指定的时间内从当前角度匀速旋转到目标角度，绝对角度指以原点角度为基准计算的角度，。
参数一：此动作执行的时间长度，单位毫秒，可为零/正值（零表示以最快的速度执行）；
参数二：目标角度值，单位0.1度，可以正/负/零值（零值时为电机角度归原点）。
示例：[ra@1500#900#]
示例说明：智能关节在1500毫秒内，从当前位置转到90度位置。
2、	相对角度旋转指令
指令名称：rb
指令说明：让智能关节在指定的时间内从当前角度匀速旋转多少角度。
参数一：此动作执行的时间长度，单位毫秒，可为零/正值（零表示以最快的速度执行）；
参数二：旋转角度，单位0.1度，可正/负，正为逆时针，负为顺时针。
示例：[rb@1200#-450#]
示例说明：智能关节在1200毫秒内，从当前位置顺时针旋转45度。
3、	终止当前运动指令
指令名称：stop
指令说明：让智能关节立即停止当前正在执行的旋转运动。
参数：无。
示例：[stop@]
示例说明：智能关节停止当前动作。
二、	配置类指令
1、	设置关节编号指令
指令名称：set-sn
指令说明：设置智能关节的编号。
参数：智能关节编号，范围1到65535。
示例：[set-sn@ 6#]
示例说明：将连接的智能关节编号设为6。

2、	设置原点位置指令
指令名称：set-or
指令说明：设置目前位置角度为智能关节的原点角度（即0度位置）。
参数：无 
示例：[set-or@ ]
示例说明：设置目前位置为智能关节的原点角度，即0度位置。
3、	设置使用WiFi功能指令
指令名称：set-ns
指令说明：设置智能关节在WiFi状态下联网参数。
参数一：连接WiFi热点名。
参数二：连接WiFi热点密码。
参数三：控制端IP（端口号为固定的22020端口）。
参数四：与主控端通信密码（密码长度6到20位）。
示例：[set-ns@robot#666888#192.168.1.12#123456# ]
示例说明：智能关节收到该指令后，将寻找加入名为“robot”的热点，然后智能关节又会去连接192.168.1.12的22020端口，连接成功发送自己的编号和“123456”通信密码，主控端程序验证无误后与智能关节进行指令通信。智能关节连接主控端成功后，智能关节上的蓝色信号灯变为慢闪状态。
4、	设置关闭WiFi功能指令
指令名称：set-nd
指令说明：设置WiFi联网功能关闭。
参数：无。
示例：[set-nd@ ]
示例说明：关闭所有WiFi的功能模式，仅通过串行总线与智能关节通信。
三、	读取类指令
1、读取关节编号指令
指令名称：get-sn
指令说明：读取所连接智能关节的编号。
参数：无。
示例：
[get-sn@]，读取连接智能关节的编号；如关节编号是2，则返回 [2]。
2、读取当前角度值指令
指令名称：get-ag
指令说明：读取智能关节当前角度值。
参数：无 
示例：
[get-ag@]，读取智能关节的当前角度值；如当前角度为65度，则返回 [650]。
3、读取使用WiFi状态指令
指令名称：get-nm
指令说明：读取联网模式，返回0表示不联WiFi网络仅通过串口总线工作，1表示启动了WiFi连接的工作模式（串口总线仍然有效）。
参数：无。
示例：
[get-nm@ ]，读取智能关节的联网工作模式。
4、读取智能关节联网配置参数指令
指令名称：get-ns
指令说明：读取智能关节联网配置信息。
参数：无。
示例：
[get-ns @]，读取智能关节联网配置信息；
5、读取智能关节最大旋转角度值指令
指令名称：get-maxag
指令说明：读取智能关节的最大旋转角度（注：在重新设定过原点位置后，此值会相应变化）。
参数：无。
示例：
[get-maxag@]，读取智能关节的最大旋转角度。
6、读取智能关节最小旋转角度值指令
指令名称：get-minag
指令说明：读取智能关节的最小旋转角度（注：在重新设定过原点位置后，此值会相应变化）。
参数：无。
示例：
[get-minag@]，读取智能关节的最小旋转角度。
四、同步等待运动类指令
1、添加同步等待的绝对角度旋转指令
指令名称：ra-w
指令说明：让智能关节在指定的时间内从当前角度匀速旋转到目标角度，绝对角度指以原点角度为基准计算的角度。注意：智能关节不立即执行此命令，而是等到执行信号后再执行。
参数一：此动作执行的时间长度，单位毫秒，可为零/正值（零表示以最快的速度执行）；
参数二：目标角度值，单位0.1度，可以正/负/零值（零值时为电机角度归原点）。
示例：[ra-w@1500#900#]
示例说明：等待信号命令，当智能关节等到执行信号后，智能关节在1500毫秒内，从当前位置转到90度位置。
2、添加同步等待的相对角度旋转指令
指令名称：rb-w
指令说明：让智能关节在指定的时间内从当前角度匀速旋转多少角度。注意：智能关节不立即执行此命令，而是等到执行信号后再执行。
参数一：此动作执行的时间长度，单位毫秒，可为零/正值（零表示以最快的速度执行）；
参数二：旋转角度，单位0.1度，可正/负，正为逆时针，负为顺时针。
示例：[rb-w@1200#-450#]
示例说明：等待信号命令，当智能关节等到执行信号后，智能关节在1200毫秒内，从当前位置顺时针旋转45度。
3、同步等待执行信号指令
指令名称：flag-w
指令说明：智能关节执行之前接收到的同步等待执行运动指令。
参数：无
示例：[flag-w@]
示例说明：执行之前提交的同步等待运动。

